var app=angular.module("JavabAzmayesh",["ui.router"]);app.config(["$stateProvider","$urlRouterProvider","$locationProvider",function(t,e,o){t.state("home",{url:"/home",views:{"":{templateUrl:"home.html",controller:"HomeController"},menu:{templateUrl:"home/menu.html"},footer:{templateUrl:"home/footer.html"}},abstract:!0}).state("home.find",{url:"/find",templateUrl:"home/find.html",controller:"HomeFindController"}).state("home.otp",{url:"/otp",templateUrl:"home/otp.html",controller:"HomeOtpController"}).state("home.history",{url:"/history",templateUrl:"home/history.html",controller:"HomeHistoryController"}).state("home.about",{url:"/about",params:{previousState:null},templateUrl:"common/about.html",controller:"CommonAboutController"}).state("home.contact",{url:"/contact",params:{previousState:null},templateUrl:"common/contact.html",controller:"CommonContactController"}),t.state("history",{url:"/history",params:{nationalCode:null},views:{"":{templateUrl:"history.html",controller:"HistoryController"},header:{templateUrl:"history/header.html"}}}),t.state("answer",{url:"/answer",params:{nationalCode:null,testNumber:null,previousState:null},views:{"":{templateUrl:"answer.html",controller:"AnswerController"},menu:{templateUrl:"answer/menu.html"},header:{templateUrl:"answer/header.html"},footer:{templateUrl:"answer/footer.html"}}}),t.state("lab",{url:"/lab",views:{"":{templateUrl:"lab.html",controller:"LabController"},menu:{templateUrl:"lab/menu.html"},footer:{templateUrl:"lab/footer.html"}},abstract:!0}).state("lab.login",{url:"/login",templateUrl:"lab/login.html",controller:"LabLoginController"}).state("lab.register",{url:"/register",params:{username:null},templateUrl:"lab/register.html",controller:"LabRegisterController"}).state("lab.validate",{url:"/validate",params:{username:null},templateUrl:"lab/validate.html",controller:"LabValidateController"}).state("lab.signedup",{url:"/signedup",templateUrl:"lab/signedup.html"}).state("lab.forget",{url:"/forget",templateUrl:"lab/forget.html",controller:"LabForgetController"}).state("lab.password",{url:"/password",templateUrl:"lab/password.html"}).state("lab.about",{url:"/about",params:{previousState:null},templateUrl:"common/about.html",controller:"CommonAboutController"}).state("lab.contact",{url:"/contact",params:{previousState:null},templateUrl:"common/contact.html",controller:"CommonContactController"}),t.state("panel",{url:"/panel",views:{"":{templateUrl:"panel.html",controller:"PanelController"},menu:{templateUrl:"panel/menu.html"},header:{templateUrl:"panel/header.html"}},abstract:!0}).state("panel.home",{url:"/home",templateUrl:"panel/home.html",controller:"PanelHomeController"}),e.otherwise("/home/find")}]),app.run(["$rootScope","$state","$stateParams",function(t,e,o){e.go("panel.home"),t.$state=e,t.$stateParams=o,t.data={},t.$on("$stateChangeStart",function(t,e,o,n,a,r){}),t.$on("$stateChangeSuccess",function(t,e,o,n,a){}),t.$on("$stateChangeError",function(t,e,o,n,a,r){})}]),app.controller("AnswerController",["$rootScope","$scope","$state","$stateParams",function(t,e,o,n){e.nationalCode=n.nationalCode,e.testNumber=n.testNumber,e.previousState=n.previousState,e.answer=t.data.answer,e.setBackHandler(function(){var t="history"===e.previousState?{nationalCode:e.nationalCode}:{};o.go(e.previousState,t)}),e.setMenuHandlers({saveFile:function(){},shareFile:function(){},printFile:function(){},goToLaboratory:function(){},laboratoryName:e.answer.laboratoryName}),e.setHeaderHandlers({paitentName:e.answer.paitentName}),e.setFooterHandlers({testDate:persianDate(e.answer.testDate).format("L"),testNumber:toPersianNumber(e.answer.testNumber)}),$("#answer-test-number").popup({inline:!0,transition:"scale"}),$("#answer-laboratory-name").popup({inline:!0,transition:"scale"})}]),app.controller("HistoryController",["$rootScope","$scope","$state","$stateParams","$timeout",function(t,e,o,n,a){function r(n){e.findingAnswer=!0,a(function(){return{testNumber:1234,nationalCode:"1234567890",paitentName:"حسام شکروی",testDate:new Date,answerDate:new Date,laboratoryName:"آزمایشگاه دکتر شاهپوری"}},400).then(function(a){t.data.answer=a,o.go("answer",{nationalCode:e.nationalCode,testNumber:n.testNumber,previousState:"history"})})}e.testClicked=r,e.nationalCode=n.nationalCode,e.paitentName=t.data.paitentName,e.paitentTests=t.data.paitentTests,e.setBackHandler(function(){o.go("home.otp")}),e.setMenuHandlers(!1),e.setHeaderHandlers({paitentName:e.paitentName}),e.setFooterHandlers(!1)}]),app.controller("HomeController",["$scope","$state",function(t,e){t.setMenuHandlers({goToHomeFind:function(){e.go("home.find")},goToHomeOtp:function(){e.go("home.otp")},goToLabLogin:function(){e.go("lab.login")},goToHomeAbout:function(){e.go("home.about",{previousState:e.current})},goToHomeContact:function(){e.go("home.contact",{previousState:e.current})}}),t.setHeaderHandlers(!1),t.setFooterHandlers(!0),$("#home-contact-us").popup({inline:!0,transition:"scale"})}]),app.controller("LabController",["$scope","$state",function(t,e){t.setMenuHandlers({goToLabLogin:function(){e.go("lab.login")},goToLabRegister:function(){e.go("lab.register")},goToHomeFind:function(){e.go("home.find")},goToLabAbout:function(){e.go("lab.about",{previousState:e.current})},goToLabContact:function(){e.go("lab.contact",{previousState:e.current})}}),t.setHeaderHandlers(!1),t.setFooterHandlers(!0)}]),app.controller("MasterController",["$scope","$rootScope",function(t,e){function o(e){t.backHandler=e}function n(e){t.menuHandlers=e}function a(e){t.headerHandlers=e}function r(e){t.footerHandlers=e}function l(){$("#ja-sidebar-menu").sidebar("setting","transition","overlay").sidebar("setting","mobileTransition","overlay").sidebar("toggle")}t.setBackHandler=o,t.setMenuHandlers=n,t.setHeaderHandlers=a,t.setFooterHandlers=r,t.toggleMenu=l,t.backHandler=void 0,t.menuHandlers=void 0,t.headerHandlers=void 0,t.footerHandlers=void 0}]),app.controller("PanelController",["$scope","$rootScope","$state","$stateParams",function(t,e,o,n){function a(t){r.pageTitle=t}t.setPageTitle=a,t.setMenuHandlers({goToMainPage:function(){o.go("panel.home")},goToSendResults:function(){o.go("panel.send")},goToResultsHistory:function(){},goToChargeAccount:function(){},goToUserAccount:function(){},logout:function(){}});var r={pageTitle:"نام کامل آزمایشگاه"};t.setHeaderHandlers(r),t.setFooterHandlers(!1)}]),function(t){function e(t){t=String(t||"");var e=t.split("");return e.map(function(t){return void 0!=o[t]?o[t]:t}).join("")}var o={0:"۰",1:"۱",2:"۲",3:"۳",4:"۴",5:"۵",6:"۶",7:"۷",8:"۸",9:"۹"};t.toPersianNumber=e}(window),app.controller("CommonAboutController",["$scope","$state","$stateParams",function(t,e,o){t.previousState=o.previousState,t.setBackHandler(function(){e.go(t.previousState)})}]),app.controller("CommonContactController",["$scope","$state","$stateParams",function(t,e,o){t.previousState=o.previousState,t.setBackHandler(function(){e.go(t.previousState)})}]),app.controller("HomeFindController",["$rootScope","$scope","$state","$timeout",function(t,e,o,n){function a(){e.findingAnswer=!0,n(function(){return{testNumber:1234,nationalCode:"1234567890",paitentName:"حسام شکروی",testDate:new Date,answerDate:new Date,laboratoryName:"آزمایشگاه دکتر شاهپوری"}},400).then(function(n){t.data.answer=n,o.go("answer",{nationalCode:e.nationalCode,testNumber:e.testNumber,previousState:"home.find"})})}e.seeAnswer=a,e.findingAnswer=!1,e.setBackHandler(!1)}]),app.controller("HomeHistoryController",["$rootScope","$scope","$state","$stateParams","$timeout",function(t,e,o,n,a){function r(){e.sendingOtp=!0,a(function(){return{paitentName:"علی رضا محمودی",paitentTests:[1,2,3,4,5,6,7,8,9,0].map(function(t){return{laboratoryName:"آمایشگاه رازی مرکزی",testNumber:6822,testDate:new Date,answerDate:new Date,id:t}})}},400).then(function(n){t.data.paitentName=n.paitentName,t.data.paitentTests=n.paitentTests,o.go("history",{nationalCode:e.nationalCode})})}e.findHistory=r,e.nationalCode=n.nationalCode,e.findingHistory=!1,e.setBackHandler(function(){o.go("home.otp")})}]),app.controller("HomeOtpController",["$rootScope","$scope","$state","$timeout",function(t,e,o,n){function a(){e.sendingOtp=!0,n(function(){o.go("home.history",{nationalCode:e.nationalCode})},300)}e.sendOtp=a,e.sendingOtp=!1,e.setBackHandler(function(){o.go("home.find")})}]),app.controller("LabForgetController",["$rootScope","$scope","$state","$timeout",function(t,e,o,n){function a(){e.sendingPassword=!0,n(function(){o.go("lab.password")},300)}e.sendPassword=a,e.sendingPassword=!1,e.setBackHandler(function(){o.go("lab.login")})}]),app.controller("LabLoginController",["$rootScope","$scope","$state","$timeout",function(t,e,o,n){function a(){}e.login=a,e.loggingIn=!1,e.setBackHandler(!1)}]),app.controller("LabRegisterController",["$rootScope","$scope","$state","$stateParams","$timeout",function(t,e,o,n,a){function r(){e.sendingRegisterationForm=!0,a(function(){o.go("lab.validate",{username:e.username})},400)}e.sendRegisterationForm=r,e.username=n.username,e.sendingRegisterationForm=!1,e.setBackHandler(function(){o.go("lab.login")})}]),app.controller("LabValidateController",["$rootScope","$scope","$state","$stateParams","$timeout",function(t,e,o,n,a){function r(){e.registering=!0,a(function(){o.go("lab.signedup")},400)}e.finishRegisteration=r,e.username=n.username,e.registering=!1,e.setBackHandler(function(){o.go("lab.register",{username:e.username})})}]),app.controller("PanelHomeController",["$scope","$rootScope","$state","$stateParams",function(t,e,o,n){t.setPageTitle("نام آزمایشگاه"),$("#test-modal").modal("show")}]);