<div id="ja-panel-send">

    <div class="ui grid">
        <div class="center aligned row">
            <div class="sixteen wide column">

                <p class="nazanin">
                    <bdi>لطفاً اطلاعات زیر را با دقت پُر کنید</bdi>
                </p>

            </div>
        </div>
    </div>

    <div class="ui centered grid">
        <div class="fourteen wide small eight wide tablet six wide computer column">
            <div class="center aligned row">

                <form class="ui {{ sendingAnswer ? 'loading' : '' }} form">

                    <div class="field" ng-class="{'error': vs.error('nationalCode')}">
                        <label class="nazanin">کد ملی بیمار</label>
                        <div class="ui input">
                            <input type="tel" ng-model="person.nationalCode" ng-change="vs.check('nationalCode'); loadPatientInfo()" ng-class="{'ja-align-left': nationalCode}" placeholder="کد ملی">
                        </div>
                        <div class="ui pointing red basic label nazanin" ng-if="vs.error('nationalCode')" ng-bind="vs.error('nationalCode')"></div>
                    </div>

                    <div class="field" ng-class="{'error': vs.error('fullName')}">
                        <label class="nazanin">نام و نام خانوادگی بیمار</label>
                        <div class="ui input">
                            <input class="nazanin ja-rtl" type="text" ng-model="person.fullName" ng-change="vs.check('fullName')" placeholder="نام و نام خانوادگی">
                        </div>
                        <div class="ui pointing red basic label nazanin" ng-if="vs.error('fullName')" ng-bind="vs.error('fullName')"></div>
                    </div>

                    <div class="field" ng-class="{'error': vs.error('mobilePhoneNumber')}">
                        <label class="nazanin">شماره تلفن همراه</label>
                        <div class="ui input">
                            <input type="tel" ng-model="person.mobilePhoneNumber" ng-change="vs.check('mobilePhoneNumber')" class="ja-align-left" placeholder="09xxxxxxxxx">
                        </div>
                        <div class="ui pointing red basic label nazanin" ng-if="vs.error('mobilePhoneNumber')" ng-bind="vs.error('mobilePhoneNumber')"></div>
                    </div>

                    <div class="field" ng-class="{'error': vs.error('phoneNumber')}">
                        <label class="nazanin"><bdi>شماره تلفن دوم (اختیاری)</bdi></label>
                        <div class="ui input">
                            <input type="tel" ng-model="person.phoneNumber" ng-change="vs.check('phoneNumber')" ng-class="{'ja-align-left': phoneNumber}" placeholder="تلفن همراه یا ثابت">
                        </div>
                        <div class="ui pointing red basic label nazanin" ng-if="vs.error('phoneNumber')" ng-bind="vs.error('phoneNumber')"></div>
                    </div>

                    <div class="field" ng-class="{'error': vs.error('extraPhoneNumber')}">
                        <label class="nazanin"><bdi>شماره تلفن سوم (اختیاری)</bdi></label>
                        <div class="ui input">
                            <input type="tel" ng-model="person.extraPhoneNumber" ng-change="vs.check('extraPhoneNumber')" ng-class="{'ja-align-left': extraPhoneNumber}" placeholder="تلفن همراه یا ثابت">
                        </div>
                        <div class="ui pointing red basic label nazanin" ng-if="vs.error('extraPhoneNumber')" ng-bind="vs.error('extraPhoneNumber')"></div>
                    </div>

                    <div class="field" ng-class="{'error': vs.error('email')}">
                        <label class="nazanin"><bdi>آدرس پست الکترونیک (اختیاری)</bdi></label>
                        <div class="ui input">
                            <input type="email" ng-model="person.email" ng-change="vs.check('email')" class="ja-align-left" placeholder="your@email.com">
                        </div>
                        <div class="ui pointing red basic label nazanin" ng-if="vs.error('email')" ng-bind="vs.error('email')"></div>
                    </div>

                    <div class="ui horizontal divider">
                        <span class="nazanin">آپلود فایل نتایج</span>
                    </div>

                    <div ng-if="files.length" ng-repeat="file in files">
                        <div class="ui teal raised clearing segment ja-preview">
                            <img class="ui small left floated image ja-preview-image" ng-src="{{iconJs(file.srcPreview)}}">
                            <img class="ui small right floated image ja-preview-delete" ng-src="{{iconJs('delete')}}" ng-click="removeFile(file)">
                            <p class="left floated nazanin ja-preview-filename" ng-bind="file.name"></p>

                            <div ng-switch="file.status" class="ja-preview-status">
                                <div ng-switch-when="Preparing" class="nazanin">در حال آماده سازی</div>
                                <div ng-switch-when="Uploading" id="progress-{{file.id}}" class="ui teal progress">
                                    <div class="bar">
                                        <div class="progress"></div>
                                    </div>
                                </div>
                                <div ng-switch-when="Uploaded" class="nazanin"></div>
                                <div ng-switch-default class="nazanin">
                                    ({{file.status}})
                                    <bdi>خطا در ارسال فایل</bdi>
                                </div>
                            </div>

                        </div>
                    </div>

                    <div ng-hide="files.length">
                        <span class="nazanin">لطفاً فایل های نتایج آزمایش را اضافه کنید</span>
                    </div>

                    <!-- drop files zone -->
                    <div id="drop-zone" class="ui center aligned basic segment">

                        <span id="drop-zone-text" class="nazanin">فایل های نتایج را داخل این کادر بکشید</span>

                        <!-- real input file -->
                        <input id="input-file" type="file" multiple>

                        <!-- custom face of input file -->
                        <div class="field">
                            <button class="fluid ui blue basic button" ng-click="selectFilesDialog()">
                            <span class="nazanin">یا با این دکمه فایل ها را اضافه کنید</span>
                        </button>
                        </div>

                    </div>

                    <div class="ui divider"></div>

                    <div class="field">
                        <label class="nazanin"><bdi>توضیحات</bdi></label>
                        <div class="ui input">
                            <textarea class="nazanin ja-rtl" ng-model="notes" rows=6 maxlength=10000 placeholder="توضیحات درباره نتایج"></textarea>
                        </div>
                    </div>
                    
                    <div class="field">
                        <button class="fluid ui blue button" type="submit" ng-click="sendAnswer()">
                            <span class="nazanin">ارسال نتایج</span>
                        </button>
                    </div>

                </form>

            </div>
        </div>
    </div>

</div>